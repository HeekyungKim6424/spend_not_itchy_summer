# spend_not_itchy_summer

(모든 과정은 데이터와 주피터 노트북 코드가 같은 파일 안에 있다는 전제 하에 실행하였습니다.)
1. 주제 선정 이유
18년도 여름이 비도 잘 안 오고 여러모로 더운 여름이었다. 여름이 다 지날 무렵에 문득 ‘오늘  한 해는 모기에 별로 안 물렸네?’ 라는 생각이 들었고, 그해 여름이 너무 더워서 모기보다 다른 곤충들이 더 활개를 쳤다는 것을 알게 되었다. 기온이 높아지면 무조건 모기가 나올 줄 알았는데, 그게 아니라는 것을 알게 되었고, 모기의 개체 수가 기온 말고 다른 날씨 요소에도 영향을 받는지 궁금해져서 이 프로젝트를 진행하기로 하였다.

2. 분석한 데이터
모기 개체 수는 서울시 모기 예보제에 쓰이는 모기 지수 데이터 사용
http://data.seoul.go.kr/dataList/OA-13285/S/1/datasetView.do
미세먼지 농도는 서울시 공공 데이터 서울시 기간별 일평균 공공 데이터 정보 사용
(전부다 다운받았으나, 2018년은 csv로 되어있는 데이터 선택하여 다운로드)
http://data.seoul.go.kr/dataList/OA-2220/S/1/datasetView.do
날씨 데이터는 지상 데이터- 종관기상관측자료 사용
(2016년 5월1일~2021년 5월 13일데이터까지 다운로드, 평균기온, 평균 상대 습도, 평균 지상 온도, 평균 전운량, 일강수량, 평균 풍속, 안개 지속시간 선택하여 다운로드)
(날씨 데이터는 레포트와 같이 제출한 데이터 참고 바람)
https://data.kma.go.kr/data/grnd/selectAsosRltmList.do?pgmNo=36.

3. 분석 과정
3.1 기본 환경 구축하기
주피터 노트북에서 단순히 파이선만을 이용해서 데이터를 구축할 수 없었으므로, 파이썬의 다양한 라이브러리를 이용하였다.
 
3.2 데이터 불러오기
서울시 공공 데이터 사이트에서 모기 지수를 다운받았다. 
데이터는 2016부터 2021년도까지 관측된 값을 가지고 있으며, 모기가 잘 안 나타나는 시기인 11월~4월까지는 측정을 안 했다는 설명이 적혀있었다. CSV 형식으로 되어있었다.
 
 
다음으로는 서울시 공공 데이터 사이트에서 서울시 미세먼지 농도를 다운받았는데, excel 형식으로 되어있었다. 모기 지수가 2016년부터 측정이 되어있어서, 그에 맞게 기간을 고려하여 2016년 데이터부터 2019년 데이터까지 다운받았다. 2020년, 2021년 데이터는 없었다.

미세먼지 농도는 excel에 데이터가 저장되어 있어서, 불러올 때 CSV로 불러오는 과정이 필요했다.
 
 

마지막으로 기상청에서 지상 날씨를 다운받았는데, 변수가 다양하게 구성되어있어 이를 전부 다 다운받기에는 무리라고 판단되었다. 따라서 모기 개체 수에 영향을 줄법한 평균기온, 일일 강수량, 평균 풍속, 평균 상대습도, 평균 전운 양, 평균 지면 온도, 안개 계속 시간을 선택하여 다운로드하였다. 기간은 똑같이 2016년부터 2021년까지 CSV 형식으로 다운받았다. 
 

모기 지수 관련 데이터는 mos_data로, 미세먼지 관련 데이터는 air_data로, 날씨 관련 데이터는 weather_data 변수로 저장하였다.

3.3 데이터 전처리하기
제일 처음에 불러온 모기 지수 데이터를 살펴봤는데, 모기 지수 발생일의 데이터 형식이 datetime이 아녀서 이를 시계열 데이터로 바꾸어 주었다.
	 

또한 CSV 파일에 들어가서 직접 데이터를 살펴보니, 2016년 이전의 데이터가 죄다 1970년으로 되어있어서, 이를 제거하기 위한 과정도 필요했다.
 

기상청 데이터 또한 날짜가 str 형식으로 되어있어서, 이를 datatime으로 바꾸어 주었다. 또한 안개 계속 시간이 28개의 관측치밖에 없어서 이는 유의미한 결과를 내놓을 수 없다고 판단하여 삭제하였다.
 
이외의 지점, 지점 명도 나중에 데이터를 병합하는데 불필요할 것 같다는 생각이 들어서 사전에 제거하였다.
 

미세먼지 데이터가 제일 까다로웠는데, 일단 형식이 excel로 되어있었을 뿐만 아니라, 데이터가 연도별로 다른 파일에 존재해서, 이를 병합하는 과정이 필요하였다. Info()와 head()를 해봤는데,  미세먼지 농도뿐만 아니라 오존, 이산화 질소 농도, 아황산가스 농도와 같은 요소들도 들어있었다. 물론 이러한 요소도 분석에 포함하면 좋겠지만, 오존이나 이산화질소는 미세먼지와 달리 우리가 눈이나 피부로 측정할 수 있는 것이 아녀서 일상생활에 적용하기는 무리라고 판단하였다. 따라서 미세먼지와 초미세먼지 농도를 제외한 다른 요소들은 다 제거하는 과정을 거쳤다. 또한 미세먼지가 서울시 전체를 묶어서 측정한 것이 아니라, 강남구, 용산구 처럼 구 단위로 묶어서 측정되어 있어서 이를 측정 일자를 기준으로 평균을 내는 작업도 필요하였다.
 
 측정 일자를 기준으로 평균을 내는 것을 먼저 할 것이냐, 아님 필요 없는 데이터를 잘라내는 것을 먼저 할 것이냐 선택을 해야 했고, 필요 없는 데이터를 자르지 않은 채 평균을 내면 나중에 예상치 못한 번거로운 과정이 더 필요할 수도 있다고 판단되어 일단 데이터를 자르고 평균을 내기로 하였다.
 
 
 
다음은 위의 과정을 거친 data들의 info()다.
 

3.4 데이터 병합하기
이 상태로 바로 시각화를 시도해봤지만, 각각 다른 파일에 있는 데이터를 하나의 그래프에 표현할 방법이 떠오르지 않았다. 코드를 작성해 보긴 했으나 처리하는 데 시간이 너무 오래 걸려 결국 작성했던 모기, 미세먼지, 날씨 데이터를 하나의 데이터로 병합하기로 결정했다.

날짜를 기준으로 병합하려 했으나, merge는 datetime 타입 변수를 기준으로 병합을 못 한다는 에러가 떴고, datatime타입을 병합하려면 concat을 사용해야 한다는 메시지도 함께 떴다. Concat은 데이터를 그대로 옆에 붙이는 함수인데, 모기데이터가 다른 데이터와 달리 2021년부터 표시가 되어있어서 이를 거꾸로 뒤집는 과정이 필요했다. 근데 문제는 행을 거꾸로 뒤집으면서 인덱스도 거꾸로 뒤집어져서, 결국 concat을 수행해도 인덱스 기준으로 병합이 되기 때문에 원하는 데이터가 나오지 않았다. 따라서 3개의 데이터의 날짜를 다시 str 타입으로 바꾸고 이를 기준으로 merge를 이용하여 일단 모기 지수 데이터와 날씨 데이터를 data라는 이름으로 병합하였다.
 
병합한 data를 미세먼지 데이터와 병합 하려고 했는데, 미세먼지는 전에 날짜를 기준으로 병합을 하여서 평균을 내는 과정 때문에, 인덱스가 측정 일자로 되어있었다. 따라서 새로운 인덱스를 만들어서 측정 일자를 열로 바꾸는 과정이 필요했다.
 
과정이 모두 끝난 후에, 미세먼지 데이터도 data와 병합을 하였고, 다음과 같은 데이터를 얻을 수 있었다.
 
이후 info에서 보이는 모기 지수 발생일과, 일시, index는 모두 날짜이기 때문에 불필요한 변수들을 drop 하는 과정과, 날짜 타입을 다시 datetime으로 바꿔주어 data를 다듬는 과정을 거쳤다.
 

3.5 데이터 시각화하기
3.3까지의 과정으로 얻은 데이터를 바탕으로, 여러 가지 그래프의 시각화를 시도해 볼 수 있었다.
  . 

4. 결과
서울시에서 제공한 모기 지수 데이터가 수변 지역, 주거지, 공원 이렇게 3종류로 나누어져 있었는데 실제로 시각화를 위해 그래프를 그려보니 다 똑같은 그래프를 그리고 있어서 레포트에는 주거지로 표시된 데이터만 다루었다
시각화 도구로는 seaborn을 사용하였다.
시각화 결과 관계성을 보이는 그래프도 있었고, 보이지 않는 그래프도 있었다.
4.1 관계가 보이는 그래프
예상대로 평균기온, 평균 지면 온도의 높낮이에 따라 모기 지수의 높낮이가 달라지는 것을 볼 수 있다.
  
*파란색 선은 모기 지수, 주황색 선은 날씨 (왼쪽은 기온, 오른쪽은 지면 온도)를 나타낸다.
예상외의 결과로, 미세먼지 농도와 모기 개체 수가 반비례하는 그래프가 그려졌다.
 
*파란색 선은 모기 지수, 주황색 선은 미세먼지 농도를 나타낸다.
미세먼지 농도 그래프(주황색)를 자세히 보면, 그래프의 오르내림이 보이는데, 모기 지수의 그래프의 오르내림과 반비례하는 양상을 띠고 있음을 알 수 있다.

4.2 관계가 보이지 않는 그래프
위에서 보였던 기온, 평균 지면 온도, 미세먼지 농도를 제외하고 다른 요소들은 관계성이 보이지 않는 결과가 나왔다.
  
*파란색 선은 모기 지수, 주황색 선은 습도를 나타낸다.
특히 모기가 물속에서 서식하여 모기 지수가 습도에 영향을 받을 줄 알았는데, 습도 그래프가 진동하긴 하지만 생각보다 1년 내내 일정하게 유지된다는 점과 모기 지수가 습도 그래프와의 관계성을 보이지 않는 점이 제일 예상을 벗어나는 결과였다.
 
*파란색 선은 습도, 파란색 점들은 강수량을 나타낸다.
강수량도 모기의 개체 수에 영향을 주지 않았다.
물론 강수량이 높을 때 모기 개체 수의 개체 수도 높긴 하지만, 반대로 모기 개체 수가 높을 때 강수량이 높은 것도 아니므로 관계성이 없다고 판단하였다.
  
*파란색 선은 모기 지수, 주황색 선은 날씨( 왼쪽이 전운량, 오른쪽이 풍속)을 나타낸다.
그 외로 풍속이나, 전운량에 대해서도 별다른 관계가 보이지 않는 것으로 판단되었다.

모기가 물속에 서식하고, 작고, 날아다니는 개체여서 습도, 강우량, 풍속과 같은 요소에 영향을 많이 받을 줄 알았는데 별다른 관계가 없어 보여서 개인적으로 놀란 결과였다.

5. 기대효과
모기의 개체 수에 영향을 주는 요소를 가지고 모기개체수를 예상하고, 개체수의 정도에 따라 일상생활에서 우리가 대비 할 수 있는 방법을 더 세세하게 나누어 볼 수 있지 않을까 라는 생각이 든다. 국가적인 차원에서는 국민들에게 행동 요령을 안내 하거나 방역과 관련된 지출이나 계획을 더 효율적으로 짤 수 있을 것으로 예상된다. 뿐만 아니라 방역 회사 같은 경우는 위와 같은 데이터를 가지고 자사 제품을 판매하는데 유용한 정보로 사용할 수 있을 것으로 기대된다. 나아가 더 많은 변수를 데이터에 추가하여 상관관계를 알아보고, 어느정도 정형화 된 데이터를 얻게 된다면 전세계적으로 데이터를 수집하여 모기뿐만 아니라 다른 병충해에도 적용하여 관련된 질병과 각종 피해들에 대비를 할 수 있지 않을까 기대한다.
 
